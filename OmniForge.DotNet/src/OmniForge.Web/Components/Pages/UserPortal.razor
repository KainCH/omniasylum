@page "/portal"
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize]

<PageTitle>User Portal - OmniForge</PageTitle>

<div class="container mt-4">
    <AuthorizeView>
        <div class="row mb-4">
            <div class="col">
                <h1 class="display-4">Welcome, @context.User.Identity?.Name!</h1>
                <p class="lead text-muted">Select a tool to get started.</p>
            </div>
        </div>
    </AuthorizeView>

    <div class="row g-4">
        <!-- Stream Counter Card -->
        <div class="col-md-6 col-lg-4">
            <div class="card h-100 shadow-sm hover-card">
                <div class="card-body text-center p-5">
                    <div class="mb-4">
                        <i class="bi bi-speedometer2 text-primary" style="font-size: 4rem;"></i>
                    </div>
                    <h3 class="card-title">Stream Counter</h3>
                    <p class="card-text text-muted">
                        Manage your death and swear counters in real-time. Syncs across all devices.
                    </p>
                    <a href="dashboard" class="btn btn-primary btn-lg mt-3 stretched-link">
                        Open Counter
                    </a>
                </div>
            </div>
        </div>

        <!-- Overlay Designer Card -->
        <div class="col-md-6 col-lg-4">
            <div class="card h-100 shadow-sm hover-card">
                <div class="card-body text-center p-5">
                    <div class="mb-4">
                        <i class="bi bi-palette-fill text-success" style="font-size: 4rem;"></i>
                    </div>
                    <h3 class="card-title">Overlay Designer</h3>
                    <p class="card-text text-muted">
                        Customize the look and feel of your stream overlay. Change colors, fonts, and more.
                    </p>
                    <a href="template-designer" class="btn btn-success btn-lg mt-3 stretched-link">
                        Open Designer
                    </a>
                </div>
            </div>
        </div>

        <!-- Discord Settings Card -->
        <div class="col-md-6 col-lg-4">
            <div class="card h-100 shadow-sm hover-card">
                <div class="card-body text-center p-5">
                    <div class="mb-4">
                        <i class="bi bi-discord text-primary" style="font-size: 4rem;"></i>
                    </div>
                    <h3 class="card-title">Discord Integration</h3>
                    <p class="card-text text-muted">
                        Configure webhooks, notifications, and community invite links.
                    </p>
                    <a href="settings/discord" class="btn btn-primary btn-lg mt-3 stretched-link">
                        Manage Discord
                    </a>
                </div>
            </div>
        </div>

        <!-- Alert Effects Card -->
        <div class="col-md-6 col-lg-4">
            <div class="card h-100 shadow-sm hover-card">
                <div class="card-body text-center p-5">
                    <div class="mb-4">
                        <i class="bi bi-magic text-warning" style="font-size: 4rem;"></i>
                    </div>
                    <h3 class="card-title">Alert Effects</h3>
                    <p class="card-text text-muted">
                        Configure visual and audio effects for your stream alerts.
                    </p>
                    <a href="settings/alert-effects" class="btn btn-warning text-dark btn-lg mt-3 stretched-link">
                        Customize Effects
                    </a>
                </div>
            </div>
        </div>

        <!-- Series Manager Card -->
        <div class="col-md-6 col-lg-4">
            <div class="card h-100 shadow-sm hover-card">
                <div class="card-body text-center p-5">
                    <div class="mb-4">
                        <i class="bi bi-collection-play text-info" style="font-size: 4rem;"></i>
                    </div>
                    <h3 class="card-title">Series Manager</h3>
                    <p class="card-text text-muted">
                        Save and load counter states for different games or series.
                    </p>
                    <a href="settings/series" class="btn btn-info text-white btn-lg mt-3 stretched-link">
                        Manage Series
                    </a>
                </div>
            </div>
        </div>

        <!-- Admin Tools (Conditional) -->
        <AuthorizeView Roles="admin">
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 shadow-sm hover-card border-danger">
                    <div class="card-body text-center p-5">
                        <div class="mb-4">
                            <i class="bi bi-shield-lock-fill text-danger" style="font-size: 4rem;"></i>
                        </div>
                        <h3 class="card-title text-danger">Admin Console</h3>
                        <p class="card-text text-muted">
                            Manage users, view system logs, and debug webhook integrations.
                        </p>
                        <a href="admin/users" class="btn btn-outline-danger btn-lg mt-3 stretched-link">
                            Access Admin
                        </a>
                    </div>
                </div>
            </div>
        </AuthorizeView>
    </div>
</div>

<style>
    .hover-card {
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }
    .hover-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 1rem 3rem rgba(0,0,0,.175)!important;
    }
</style>
